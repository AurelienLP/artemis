Artemis Next Generation
=====

Currently working with tests calling the function journey() only once. Only on one coverage (to choose in accordance with the tests).
If a test fails, a folder 'outputs' is created in artemis/artemis/ and reference and response are saved as a file, json format.
Also, if a test fails, differences between both files line per line are shown in the console.


How to use
=====
* create a virtual environment with the python packages in requirements.txt (for python 3):
  `mkvirtualenv --python=/usr/bin/python3 <venv_name>
  pip3 install -r requirements.txt`

  For python2:
  `pip install -r requirements_py2.txt`

* launch jormun/tyr/artemis instances' docker containers:
    - to build jormun/tyr's containers, use [docker-compose.yml](https://github.com/CanalTP/navitia-docker-compose/blob/master/docker-compose.yml)
    - to build artemis instances' containers, use [docker-artemis-instance.yml](https://github.com/CanalTP/navitia-docker-compose/blob/master/artemis/docker-artemis-instance.yml)(you can also rebuild this file with a jinja template, which is explained in readme)
    - Once you set up all correctly, launch this command: `docker-compose -f docker-compose.yml -f docker-artemis-instance.yml up`

* In default_settings.py
    - set URL_JORMUN (with port)
    - set URL_TYR
    - set DATA_DIR (artemis data)
    - set REFERENCE_FILE_PATH(the path to artemis references)
    - set RESPONSE_FILE_PATH (Optional, output of the responses generated by artemis)
    - set KIRIN_API (if needed)

* In the settings file, set 'USE_ARTEMIS_NG' to True

* Launch tests: `py.test artemis/tests`
    - If you don't want to call `cities`, add `--skip_cities`
    - If you want to show prints, you can also add this argument `-s`

